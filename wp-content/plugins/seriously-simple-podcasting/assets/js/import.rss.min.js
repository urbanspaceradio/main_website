jQuery(document).ready(function(n){var r,t=n("#ssp-external-feed-progress"),e=n("#podcast_settings_tab_nonce");function a(e,r){0!==e?(""===r&&(r="blue"),t.progressbar("value")<100&&(t.progressbar({value:e}),r="blue"===(e=r)?"green":"blue",t.removeClass(r).addClass(e))):t.progressbar({value:0})}function s(){n.ajax({url:ajaxurl,type:"get",data:{action:"get_external_rss_feed_progress",nonce:e.val()}}).done(function(e){"error"===e.status&&(o(),clearInterval(r)),a(e,"blue")})}function o(){alert("An error occurred importing the RSS feed, please refresh this page to try again")}0<t.length&&(!0===confirm("You are about to import an external RSS feed.")?(a(0),r=setInterval(s,250),n.ajax({url:ajaxurl,type:"get",data:{action:"import_external_rss_feed",nonce:e.val()}}).done(function(e){clearInterval(r),"error"!==e.status?(function(e){n(".ssp-ssp-external-feed-message").html("Import completed successfully !").css("color","green");for(var r=n("#ssp-external-feed-status"),t=r.html(),a="",s=0;s<e.length;s++)a="<p>Imported "+e[s]+"</p>"+a;t=a+t,r.html(t)}(e.episodes),a(100,"green")):o()}).fail(function(e){o()})):n.ajax({url:ajaxurl,type:"get",data:{action:"reset_external_rss_feed_progress",nonce:e.val()}}).done(function(e){"error"!==e.status?(n(".ssp-ssp-external-feed-message").html("Import cancelled !").css("color","red"),n("#ssp-external-feed-status").html("")):alert("Could not reset current feed import, please refresh this page to try again")}))});