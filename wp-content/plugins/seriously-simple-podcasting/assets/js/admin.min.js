jQuery(document).ready(function(o){var r,a;o.fn.ssp_upload_media_file=function(e,t,i=!1){var e=e.attr("id"),a=e.replace("_button",""),s=e.replace("_button","_preview");(r=wp.media.frames.file_frame=wp.media({title:o(this).data("uploader_title"),button:{text:o(this).data("uploader_button_text")},multiple:!1})).on("select",function(){var e=r.state().get("selection").first().toJSON();"function"==typeof i&&!i(e)||(o("#"+a).val(e.url),t&&o("#"+s).attr("src",e.url))}),r.open()},o("#series_upload_image_button").click(function(e){e.preventDefault();wp.media.editor.send.attachment;var e=o(this).attr("id"),t=e.replace("_upload","").replace("_button","_preview"),i=e.replace("_upload","").replace("_button","_id");a||(a=wp.media({title:o(this).data("uploader_title"),button:{text:o(this).data("uploader_button_text")},library:{type:["image"]},multiple:!1})).on("select",function(){var e=a.state().get("selection").first().toJSON();o("#"+t).attr("src",e.url),o("#"+i).val(e.id)}),a.open()}),o("#series_remove_image_button").click(function(e){e.preventDefault();var t=o(this).attr("id"),i=t.replace("_remove","").replace("_button","_preview"),e=t.replace("_remove","").replace("_button","_id");confirm("Are you sure?")&&(t=o("#"+i).attr("data-src"),o("#"+i).attr("src",t),o("#"+e).val(""))}),o("#upload_audio_file_button").click(function(e){e.preventDefault(),o.fn.ssp_upload_media_file(o(this),!1)}),o("#episode_embed_code").click(function(){o(this).select()}),o(".episode_embed_code_size_option").change(function(){var e=o("#episode_embed_code_width").val(),t=o("#episode_embed_code_height").val(),i=o("#post_ID").val();o.post(ajaxurl,{action:"update_episode_embed_code",width:e,height:t,post_id:i},function(e){e&&(o("#episode_embed_code").val(e),o("#episode_embed_code").select())})}),o(".ssp-datepicker").datepicker({changeMonth:!0,changeYear:!0,showAnim:"slideDown",dateFormat:"d MM, yy",altField:"#date_recorded",altFormat:"yy-mm-dd",onClose:function(e,t){var i=o.datepicker.parseDate("d MM, yy",e),e=o.datepicker.formatDate("yy-mm-dd",i),i=o(this).attr("id").replace("_display","");o("#"+i).val(e)}}),o(".ssp-datepicker").change(function(){var e;o(this).val()||(e=o(this).attr("id").replace("_display",""),o("#"+e).val(""))}),o("#feed-series-toggle").click(function(e){o(this).hasClass("series-open")?(o("#feed-series-list").slideUp("fast"),o(this).removeClass("series-open"),o(this).addClass("series-closed")):o(this).hasClass("series-closed")&&(o("#feed-series-list").slideDown("fast"),o(this).removeClass("series-closed"),o(this).addClass("series-open"))}),o("#ss_podcasting_data_image_delete").click(function(){return o("#ss_podcasting_data_image").val(""),o("#ss_podcasting_data_image_preview").attr("src",""),!1}),o("#cover_image_button, #ss_podcasting_data_image_button").click(function(e){var t="cover_image_button"===o(e.target).prop("id")?function(e){return e.width===e.height&&300<=e.width}:function(e){return 1400<=e.width&&1400<=e.height&&e.width<=3e3&&e.height<=3e3},i=o(this).parent().find(".description"),a="cover_image_button"===o(e.target).prop("id")?o("#cover_image_id"):o("#ss_podcasting_data_image_preview");o.fn.ssp_upload_media_file(o(this),!0,t),i.css("color",""),r.on("select",function(){var e=r.state().get("selection").first().toJSON();t(e)?a.val(e.id):i.css("color","red")})}),o("#cover_image_delete").click(function(){o("#cover_image, #cover_image_id").val(""),o("#cover_image_preview").attr("src","")})});